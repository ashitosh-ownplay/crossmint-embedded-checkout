"use strict";(self.webpackChunkcrossmint_embedded_checkout=self.webpackChunkcrossmint_embedded_checkout||[]).push([[90352,87516],{90352:(e,n,t)=>{t.d(n,{autoConnectInjectedWallet:()=>f,connectInjectedWallet:()=>m});var r=t(60988),a=t(84188),i=t(6500),o=t(63809),s=t(5543),c=t(9232),d=t(87516),u=t(7827);function h(e){const n=(0,d.injectedProvider)(e);if(!n)throw new Error(`No injected provider found for wallet: "${e}"`);return n}async function m(e,n,t){const r=h(e),o=(await r.request({method:"eth_requestAccounts"}))[0];if(!o)throw new Error("no accounts available");const s=(0,i.bv)(o),d=await r.request({method:"eth_chainId"}).then(c.A);let u=n.chain&&n.chain.id===d?n.chain:(0,a.Q4)(d);return n.chain&&n.chain.id!==d&&(await l(r,n.chain),u=n.chain),w(r,s,u,t)}async function f(e,n,t){const r=h(e),o=(await r.request({method:"eth_accounts"}))[0];if(!o)throw new Error("no accounts available");const s=(0,i.bv)(o),d=await r.request({method:"eth_chainId"}).then(c.A);return w(r,s,t&&t.id===d?t:(0,a.Q4)(d),n)}function v(e,n){const t={address:n,async sendTransaction(n){return{transactionHash:await e.request({method:"eth_sendTransaction",params:[{accessList:n.accessList,value:n.value?(0,o.cK)(n.value):void 0,gas:n.gas?(0,o.cK)(n.gas):void 0,from:this.address,to:n.to,data:n.data}]})}},async signMessage({message:n}){if(!t.address)throw new Error("Provider not setup");const r="string"==typeof n?(0,o.i3)(n):n.raw instanceof Uint8Array?(0,o.EY)(n.raw):n.raw;return await e.request({method:"personal_sign",params:[r,t.address]})},async signTypedData(n){if(!e||!t.address)throw new Error("Provider not setup");const a=(0,u.y)(n),{domain:i,message:o,primaryType:s}=a,c={EIP712Domain:(0,r.H4)({domain:i}),...a.types};(0,r.$$)({domain:i,message:o,primaryType:s,types:c});const d=(0,r.v8)({domain:i??{},message:o,primaryType:s,types:c});return await e.request({method:"eth_signTypedData_v4",params:[t.address,d]})}};return t}async function w(e,n,t,r){const o=v(e,n);async function s(){e.removeListener("accountsChanged",u),e.removeListener("chainChanged",h),e.removeListener("disconnect",d)}function d(){s(),r.emit("disconnect",void 0)}function u(n){if(n[0]){const t=v(e,(0,i.bv)(n[0]));r.emit("accountChanged",t),r.emit("accountsChanged",n)}else d()}function h(e){const n=(0,a.Q4)((0,c.A)(e));r.emit("chainChanged",n)}return e.on&&(e.on("accountsChanged",u),e.on("chainChanged",h),e.on("disconnect",d)),[o,t,s,n=>l(e,n)]}async function l(e,n){const t=(0,o.cK)(n.id);try{await e.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch(r){if(4902!==r?.code&&4902!==r?.data?.originalError?.code)throw r;{const r=await(0,a.PB)(n);await e.request({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:r.name,nativeCurrency:r.nativeCurrency,rpcUrls:(0,s.k)(r),blockExplorerUrls:r.explorers?.map((e=>e.url))}]})}}}},87516:(e,n,t)=>{function r(){const e=new Set;let n=[];const t=()=>function(t){if("undefined"==typeof window)return;const r=t=>{return r=t.detail,void(n.some((({info:e})=>e.uuid===r.info.uuid))||(n=[...n,r],e.forEach((e=>e(n,{added:[r]})))));var r};return window.addEventListener("eip6963:announceProvider",r),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",r)}();let r=t();return{_listeners:()=>e,clear(){e.forEach((e=>e([],{removed:[...n]}))),n=[]},destroy(){this.clear(),e.clear(),r?.()},findProvider:({rdns:e})=>n.find((n=>n.info.rdns===e)),getProviders:()=>n,reset(){this.clear(),r?.(),r=t()},subscribe:(t,{emitImmediately:r}={})=>(e.add(t),r&&t(n,{added:n}),()=>e.delete(t))}}t.d(n,{injectedProvider:()=>s});var a=t(71473),i=t(52502);const o=(()=>(0,a.Bd)()?r():void 0)();function s(e){const n=function(){const e=function(){if(o)return o}()?.getProviders()||[];for(const n of e)if("io.metamask.mobile"===n.info.rdns){n.info.rdns=i.gN;break}return e}().find((n=>n.info.rdns===e));return n?.provider}}}]);